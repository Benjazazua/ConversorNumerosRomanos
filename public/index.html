<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de N√∫meros Romanos</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital@0;1&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #8B7355 0%, #D4AF37 50%, #8B7355 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(
                    90deg,
                    rgba(139, 115, 85, 0.1) 0px,
                    transparent 1px,
                    transparent 40px,
                    rgba(139, 115, 85, 0.1) 41px
                );
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1100px;
            width: 100%;
            background: linear-gradient(to bottom, #f4e8d0 0%, #e8dcc4 100%);
            padding: 50px 40px;
            border-radius: 0;
            box-shadow: 
                0 0 0 8px #8B4513,
                0 0 0 12px #D4AF37,
                0 20px 60px rgba(0,0,0,0.5),
                inset 0 2px 10px rgba(255,255,255,0.5);
            position: relative;
            z-index: 1;
            border: 3px solid #8B4513;
        }

        .container::before,
        .container::after {
            content: '‚ùñ';
            position: absolute;
            top: 20px;
            font-size: 30px;
            color: #8B4513;
        }

        .container::before {
            left: 20px;
        }

        .container::after {
            right: 20px;
        }

        h1 {
            text-align: center;
            font-family: 'Cinzel', serif;
            color: #8B4513;
            margin-bottom: 10px;
            font-size: 42px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 
                2px 2px 0px #D4AF37,
                4px 4px 10px rgba(0,0,0,0.3);
        }

        .subtitle {
            text-align: center;
            color: #654321;
            margin-bottom: 40px;
            font-size: 18px;
            font-style: italic;
            letter-spacing: 2px;
        }

        .divider {
            height: 3px;
            background: linear-gradient(to right, transparent, #8B4513, #D4AF37, #8B4513, transparent);
            margin: 30px 0;
        }

        .converters-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .converters-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }

        .converter-card {
            background: linear-gradient(to bottom, #faf6ed 0%, #f0e8d8 100%);
            padding: 30px;
            border: 3px solid #8B4513;
            box-shadow: 
                inset 0 0 20px rgba(139,115,85,0.2),
                0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }

        .converter-card::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border: 2px solid #D4AF37;
            pointer-events: none;
        }

        .card-title {
            font-family: 'Cinzel', serif;
            font-size: 24px;
            font-weight: 600;
            color: #8B4513;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .card-title::before,
        .card-title::after {
            content: '‚óÜ';
            color: #D4AF37;
            font-size: 16px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #654321;
            font-weight: 600;
            font-size: 16px;
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 3px solid #8B4513;
            background: #fdfbf7;
            font-size: 18px;
            font-family: 'Cinzel', serif;
            transition: all 0.3s;
            color: #654321;
            text-align: center;
            font-weight: 600;
            letter-spacing: 2px;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #D4AF37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
            background: #fff;
        }

        input[type="text"]::placeholder {
            color: #a89079;
            font-weight: 400;
        }

        .convert-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(to bottom, #8B4513 0%, #654321 100%);
            color: #D4AF37;
            border: 3px solid #D4AF37;
            font-size: 18px;
            font-weight: 600;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }

        .convert-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .convert-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .convert-btn:hover {
            background: linear-gradient(to bottom, #654321 0%, #8B4513 100%);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.5);
            transform: translateY(-2px);
        }

        .convert-btn:active {
            transform: translateY(0);
        }

        .convert-btn span {
            position: relative;
            z-index: 1;
        }

        .loading {
            display: none;
            text-align: center;
            color: #8B4513;
            margin-top: 15px;
            font-style: italic;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f0e8d8;
            border-top: 3px solid #8B4513;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-box {
            margin-top: 15px;
            padding: 15px;
            background: linear-gradient(to right, #8B0000, #A52A2A);
            border: 2px solid #654321;
            color: #FFE4B5;
            font-size: 14px;
            display: none;
            text-align: center;
            font-family: 'Cinzel', serif;
        }

        .error-box.show {
            display: block;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .result-box {
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(to bottom, #fff 0%, #f9f5ed 100%);
            border: 3px solid #D4AF37;
            display: none;
            box-shadow: inset 0 2px 10px rgba(139,69,19,0.1);
        }

        .result-box.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-label {
            font-size: 12px;
            color: #8B4513;
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Cinzel', serif;
        }

        .result-value {
            font-size: 32px;
            font-weight: bold;
            color: #8B4513;
            text-align: center;
            font-family: 'Cinzel', serif;
            letter-spacing: 3px;
        }

        .info-box {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(to right, #8B7355, #a0886f, #8B7355);
            border: 3px solid #654321;
            font-size: 15px;
            color: #f4e8d0;
            text-align: center;
            font-style: italic;
        }

        .info-box strong {
            color: #D4AF37;
            font-family: 'Cinzel', serif;
        }

        .history {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(to bottom, #e8dcc4 0%, #d4c8ac 100%);
            border: 3px solid #8B4513;
            position: relative;
        }

        .history::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border: 2px solid #D4AF37;
            pointer-events: none;
        }

        .history-title {
            font-weight: 600;
            margin-bottom: 20px;
            color: #654321;
            font-size: 20px;
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }

        .history-item {
            padding: 15px;
            background: #fdfbf7;
            margin-bottom: 10px;
            border: 2px solid #8B7355;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Cinzel', serif;
        }

        .history-item strong {
            color: #8B4513;
        }

        .history-clear {
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(to bottom, #8B0000, #654321);
            color: #D4AF37;
            border: 2px solid #D4AF37;
            cursor: pointer;
            font-size: 14px;
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .history-clear:hover {
            background: linear-gradient(to bottom, #654321, #8B0000);
            box-shadow: 0 3px 10px rgba(212, 175, 55, 0.4);
        }

        .column-decoration {
            position: absolute;
            width: 40px;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                #8B4513 5%, 
                #654321 10%, 
                #8B4513 15%,
                #8B4513 85%,
                #654321 90%,
                #8B4513 95%,
                transparent 100%
            );
            top: 0;
        }

        .column-left {
            left: -50px;
        }

        .column-right {
            right: -50px;
        }

        @media (max-width: 1200px) {
            .column-decoration {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="column-decoration column-left"></div>
        <div class="column-decoration column-right"></div>
        
        <h1>‚öî Conversor de N√∫meros ‚öî</h1>
        <p class="subtitle">Traducci√≥n de N√∫meros Romanos y Ar√°bigos</p>

        <div class="divider"></div>

        <div class="converters-grid">
            <div class="converter-card">
                <div class="card-title">
                    Romano ‚Üí Ar√°bigo
                </div>
                
                <div class="input-group">
                    <label for="romanInput">N√∫mero Romano:</label>
                    <input 
                        type="text" 
                        id="romanInput" 
                        placeholder="XIV, MCMXCIV..."
                        onkeypress="if(event.key==='Enter') convertRomanToArabic()"
                    >
                </div>

                <button class="convert-btn" onclick="convertRomanToArabic()">
                    <span>‚ö° Convertir ‚ö°</span>
                </button>

                <div class="loading" id="loadingR2A">
                    <div class="spinner"></div>
                    <span>Convirtiendo...</span>
                </div>

                <div class="error-box" id="errorR2A"></div>

                <div class="result-box" id="resultR2A">
                    <div class="result-label">N√∫mero Ar√°bigo:</div>
                    <div class="result-value" id="resultValueR2A"></div>
                </div>
            </div>

            <div class="converter-card">
                <div class="card-title">
                    Ar√°bigo ‚Üí Romano
                </div>
                
                <div class="input-group">
                    <label for="arabicInput">N√∫mero Ar√°bigo:</label>
                    <input 
                        type="text" 
                        id="arabicInput" 
                        placeholder="14, 1994..."
                        onkeypress="if(event.key==='Enter') convertArabicToRoman()"
                    >
                </div>

                <button class="convert-btn" onclick="convertArabicToRoman()">
                    <span>‚ö° Convertir ‚ö°</span>
                </button>

                <div class="loading" id="loadingA2R">
                    <div class="spinner"></div>
                    <span>Convirtiendo...</span>
                </div>

                <div class="error-box" id="errorA2R"></div>

                <div class="result-box" id="resultA2R">
                    <div class="result-label">N√∫mero Romano:</div>
                    <div class="result-value" id="resultValueA2R"></div>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="info-box">
            <strong>‚öî Nota Importante:</strong> N√∫meros Romanos (I - MMMCMXCIX) = N√∫meros Ar√°bigos (1 - 3999)
        </div>

        <div class="history">
            <div class="history-title">üìú Historial de Conversiones üìú</div>
            <div id="historial"></div>
            <button class="history-clear" onclick="limpiarHistorial()">
                ‚öî Borrar Historial ‚öî
            </button>
        </div>
    </div>

    <script>
        let historial = [];

        async function convertRomanToArabic() {
            const input = document.getElementById('romanInput').value.trim().toUpperCase();
            const resultBox = document.getElementById('resultR2A');
            const resultValue = document.getElementById('resultValueR2A');
            const errorBox = document.getElementById('errorR2A');
            const loading = document.getElementById('loadingR2A');

            resultBox.classList.remove('show');
            errorBox.classList.remove('show');
            errorBox.textContent = '';

            if (!input) {
                errorBox.textContent = '‚ö†Ô∏è Por favor, introduce un n√∫mero romano.';
                errorBox.classList.add('show');
                return;
            }

            loading.classList.add('show');

            // Simulaci√≥n de una llamada a API (el endpoint /api/r2a no existe en este entorno)
            // Aqu√≠ se usar√≠a una funci√≥n local para la conversi√≥n, pero mantengo la estructura de la API
            // para mostrar la traducci√≥n de los mensajes de error/√©xito.
            try {
                // Inicia la conversi√≥n simulada
                await new Promise(resolve => setTimeout(resolve, 500)); // Simula un delay de red

                const conversionResult = romanToArabic(input);

                if (typeof conversionResult === 'string') {
                     throw new Error(conversionResult); // El resultado es un mensaje de error
                }

                const data = {
                    status: 'success',
                    roman: input,
                    arabic: conversionResult
                };

                resultValue.textContent = data.arabic;
                resultBox.classList.add('show');

                agregarHistorial({
                    input: data.roman,
                    result: data.arabic,
                    type: 'R‚ÜíA'
                });

            } catch (error) {
                errorBox.textContent = `‚ùå ${error.message}`;
                errorBox.classList.add('show');
            } finally {
                loading.classList.remove('show');
            }
        }

        async function convertArabicToRoman() {
            const input = document.getElementById('arabicInput').value.trim();
            const resultBox = document.getElementById('resultA2R');
            const resultValue = document.getElementById('resultValueA2R');
            const errorBox = document.getElementById('errorA2R');
            const loading = document.getElementById('loadingA2R');

            resultBox.classList.remove('show');
            errorBox.classList.remove('show');
            errorBox.textContent = '';

            if (!input) {
                errorBox.textContent = '‚ö†Ô∏è Por favor, introduce un n√∫mero ar√°bigo.';
                errorBox.classList.add('show');
                return;
            }

            loading.classList.add('show');

            // Simulaci√≥n de una llamada a API (el endpoint /api/a2r no existe en este entorno)
            try {
                // Inicia la conversi√≥n simulada
                await new Promise(resolve => setTimeout(resolve, 500)); // Simula un delay de red

                const arabicNum = parseInt(input, 10);
                const conversionResult = arabicToRoman(arabicNum);

                if (typeof conversionResult === 'string') {
                     throw new Error(conversionResult); // El resultado es un mensaje de error
                }
                
                const data = {
                    status: 'success',
                    arabic: arabicNum,
                    roman: conversionResult
                };

                resultValue.textContent = data.roman;
                resultBox.classList.add('show');

                agregarHistorial({
                    input: data.arabic,
                    result: data.roman,
                    type: 'A‚ÜíR'
                });

            } catch (error) {
                errorBox.textContent = `‚ùå ${error.message}`;
                errorBox.classList.add('show');
            } finally {
                loading.classList.remove('show');
            }
        }

        function agregarHistorial(item) {
            historial.unshift({
                ...item,
                timestamp: new Date().toLocaleTimeString('es-ES')
            });
            
            if (historial.length > 10) historial.pop();
            
            const historialDiv = document.getElementById('historial');
            historialDiv.innerHTML = historial.map(h => `
                <div class="history-item">
                    <span><strong>${h.type}:</strong> ${h.input} ‚Üí ${h.result}</span>
                    <span style="font-size: 12px; color: #8B7355;">
                        ${h.timestamp}
                    </span>
                </div>
            `).join('');
        }

        function limpiarHistorial() {
            historial = [];
            document.getElementById('historial').innerHTML = 
                '<p style="color: #8B7355; text-align: center; padding: 15px; font-style: italic;">El historial est√° vac√≠o.</p>';
        }

        // --- Funciones de Conversi√≥n de N√∫meros (Implementaci√≥n local) ---

        const romanMap = {
            I: 1, V: 5, X: 10, L: 50, C: 100, D: 500, M: 1000
        };

        function romanToArabic(roman) {
            // Validaci√≥n de formato b√°sico de Romano (solo los caracteres v√°lidos y no vacio)
            if (!/^[IVXLCDM]+$/i.test(roman)) {
                return "El n√∫mero romano contiene caracteres inv√°lidos.";
            }

            // Uso de una expresi√≥n regular simple para detectar patrones no permitidos
            // Esto es una validaci√≥n simplificada, ya que la validaci√≥n completa es compleja (e.g., IXL no es v√°lido)
            if (/I{4,}|X{4,}|C{4,}|M{4,}|V{2,}|L{2,}|D{2,}|(?=I)[XLCDM]|(?=X)[LCDM]{2,}|(?=C)[DM]{2,}/i.test(roman)) {
                 // Esta regla simplificada intenta atrapar I(>3), V(>1), L(>1), D(>1) y algunos patrones de resta inv√°lidos
                 // Una validaci√≥n completa debe ser m√°s sofisticada.
                 // Ej: IVX es inv√°lido, pero pasar√≠a esta simplificaci√≥n.
            }
            
            let arabic = 0;
            for (let i = 0; i < roman.length; i++) {
                const current = romanMap[roman[i]];
                const next = romanMap[roman[i + 1]];
                
                if (next > current) {
                    arabic += next - current;
                    i++; 
                } else {
                    arabic += current;
                }
            }
            
            // Comprobaci√≥n de que el n√∫mero romano generado a partir del ar√°bigo sea el mismo
            // Esto valida si el romano de entrada es "v√°lido" (can√≥nico)
            if (arabic > 3999) return "El n√∫mero excede el l√≠mite (3999).";
            if (arabicToRoman(arabic) !== roman) return "El n√∫mero romano no es v√°lido o can√≥nico.";

            return arabic;
        }

        const arabicMap = [
            [1000, 'M'], [900, 'CM'], [500, 'D'], [400, 'CD'], [100, 'C'],
            [90, 'XC'], [50, 'L'], [40, 'XL'], [10, 'X'], [9, 'IX'], 
            [5, 'V'], [4, 'IV'], [1, 'I']
        ];

        function arabicToRoman(arabic) {
            if (isNaN(arabic) || arabic < 1 || arabic > 3999) {
                return "Por favor, introduce un n√∫mero ar√°bigo entre 1 y 3999.";
            }

            let roman = '';
            for (const [value, symbol] of arabicMap) {
                while (arabic >= value) {
                    roman += symbol;
                    arabic -= value;
                }
            }
            return roman;
        }


        // Inicializar
        limpiarHistorial();
    </script>
</body>
</html>